---
phase: 03-customer-article-and-order-resources
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - nodes/Fortnox/CustomerDescription.ts
  - nodes/Fortnox/ArticleDescription.ts
autonomous: true
requirements:
  - CUST-01
  - CUST-02
  - CUST-03
  - CUST-04
  - ART-01
  - ART-02
  - ART-03
  - ART-04
  - ART-05

must_haves:
  truths:
    - "CustomerDescription.ts exports customerOperations and customerFields arrays"
    - "Customer operations include create, delete, get, getMany, update"
    - "Customer create has Name as required top-level field, all other writable fields in Additional Fields"
    - "Customer getMany has Return All toggle, Limit, and Filters collection with filter/lastmodified/sortby/sortorder"
    - "Customer commonCustomerFields shared array used by both Additional Fields and Update Fields"
    - "ArticleDescription.ts exports articleOperations and articleFields arrays"
    - "Article operations include create, delete, get, getMany, update"
    - "Article create has Description as top-level required field, all other writable fields in Additional Fields"
    - "Article getMany has Return All toggle, Limit, and Filters collection with filter/lastmodified/sortby/sortorder"
    - "SalesPrice is NOT included in writable article fields (read-only on Article endpoint)"
  artifacts:
    - path: "nodes/Fortnox/CustomerDescription.ts"
      provides: "Customer resource operations and field definitions"
      exports: ["customerOperations", "customerFields"]
    - path: "nodes/Fortnox/ArticleDescription.ts"
      provides: "Article resource operations and field definitions"
      exports: ["articleOperations", "articleFields"]
  key_links:
    - from: "nodes/Fortnox/CustomerDescription.ts"
      to: "n8n-workflow INodeProperties"
      via: "type import"
      pattern: "import type.*INodeProperties.*from 'n8n-workflow'"
    - from: "nodes/Fortnox/ArticleDescription.ts"
      to: "n8n-workflow INodeProperties"
      via: "type import"
      pattern: "import type.*INodeProperties.*from 'n8n-workflow'"
---

<objective>
Create CustomerDescription.ts and ArticleDescription.ts following the exact InvoiceDescription.ts pattern. Each file exports an operations array (Operation dropdown) and a fields array (all parameter definitions). Full field coverage per user decision: all writable Fortnox API fields exposed, all API-supported filters and sort options.

Purpose: Customer and Article are the two simpler resources (no line items like Invoice/Order). Building them together maximizes throughput while keeping context budget manageable.

Output: Two complete Description files ready for wiring into Fortnox.node.ts in Plan 03.
</objective>

<execution_context>
@/Users/adamnoren/.claude/get-shit-done/workflows/execute-plan.md
@/Users/adamnoren/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@nodes/Fortnox/InvoiceDescription.ts

<interfaces>
<!-- The executor must follow InvoiceDescription.ts patterns exactly. Key patterns: -->

From nodes/Fortnox/InvoiceDescription.ts:
```typescript
import type { INodeProperties } from 'n8n-workflow';

// Operations array: exported, displayOptions show resource match
export const invoiceOperations: INodeProperties[] = [
    {
        displayName: 'Operation',
        name: 'operation',
        type: 'options',
        noDataExpression: true,
        displayOptions: { show: { resource: ['invoice'] } },
        options: [
            // Alphabetized by name, each has: name, value, action, description
            { name: 'Create', value: 'create', action: 'Create an invoice', description: 'Create a new invoice' },
            // ...
        ],
        default: 'getMany',
    },
];

// Shared fields: extracted array spread into both Additional Fields and Update Fields
const commonInvoiceFields: INodeProperties[] = [ /* alphabetized by displayName */ ];

// Fields array: exported, contains all parameter definitions
export const invoiceFields: INodeProperties[] = [
    // A. Identifier field (shared by get, update, delete, actions)
    // B. Required fields for create (top-level, required: true)
    // C. fixedCollection for line items (create)
    // D. Return All toggle (getMany)
    // E. Limit (getMany when returnAll=false)
    // F. Filters collection (getMany)
    // G. Additional Fields collection (create) -- uses commonFields
    // H. Update Fields collection (update) -- uses ...commonFields
];
```

Key conventions from Phase 2 decisions:
- Title Case for all displayName values
- Options type fields default to valid option value (not empty string)
- Filters/collections alphabetized by displayName
- commonFields shared between Additional Fields and Update Fields
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CustomerDescription.ts with full field coverage</name>
  <files>nodes/Fortnox/CustomerDescription.ts</files>
  <action>
Create `nodes/Fortnox/CustomerDescription.ts` following the exact InvoiceDescription.ts pattern.

**Exports:** `customerOperations` and `customerFields`

**customerOperations:** Operation dropdown with displayOptions `{ show: { resource: ['customer'] } }`:
- Create (value: 'create', action: 'Create a customer', description: 'Create a new customer')
- Delete (value: 'delete', action: 'Delete a customer', description: 'Delete a customer')
- Get (value: 'get', action: 'Get a customer', description: 'Retrieve a customer by customer number')
- Get Many (value: 'getMany', action: 'Get many customers', description: 'List customers with optional filters')
- Update (value: 'update', action: 'Update a customer', description: 'Update a customer record')
- default: 'getMany'
- Alphabetized by name.

**customerFields array structure:**

A. **CustomerNumber** (shared by get, update, delete):
   - displayName: 'Customer Number', name: 'customerNumber', type: 'string', required: true
   - displayOptions: show resource=['customer'], operation=['get', 'update', 'delete']
   - description: 'The customer number in Fortnox'

B. **Name** (required for create):
   - displayName: 'Name', name: 'name', type: 'string', required: true
   - displayOptions: show resource=['customer'], operation=['create']
   - description: 'Customer name (required)'

C. **Return All** toggle (getMany):
   - Same pattern as Invoice

D. **Limit** (getMany when returnAll=false):
   - Same pattern as Invoice, default: 50, min: 1, max: 500

E. **Filters** collection (getMany) with these options (alphabetized by displayName):
   - Filter: options type with values: active, inactive. Default: 'active'. Description: 'Filter customers by status'
   - Last Modified: name 'lastmodified', type 'string', default '', description 'Filter by last modified date (YYYY-MM-DD HH:MM)'
   - Sort By: options with values: customernumber, name. Default: 'customernumber'. Description: 'Sort results by field'
   - Sort Order: options with ascending, descending. Default: 'ascending'

F. **Additional Fields** collection (create) -- uses `commonCustomerFields`:
   - displayOptions: show resource=['customer'], operation=['create']
   - options: commonCustomerFields

G. **Update Fields** collection (update) -- uses spread of commonCustomerFields:
   - displayOptions: show resource=['customer'], operation=['update']
   - options: [...commonCustomerFields]

**commonCustomerFields array** (alphabetized by displayName, all writable fields):

Include ALL of these fields (alphabetized by displayName):
- Active (boolean, default false, 'Whether customer is active')
- Address Line 1 (Address1, string)
- Address Line 2 (Address2, string)
- City (City, string)
- Comments (Comments, string)
- Cost Center (CostCenter, string)
- Country Code (CountryCode, string, 'Two-letter country code (e.g., SE)')
- Currency (Currency, string, 'Default currency code (e.g., SEK)')
- Customer Number (CustomerNumber, string, 'Unique identifier (auto-generated if omitted on create)')
- Delivery Address Line 1 (DeliveryAddress1, string)
- Delivery Address Line 2 (DeliveryAddress2, string)
- Delivery City (DeliveryCity, string)
- Delivery Country Code (DeliveryCountryCode, string)
- Delivery Fax (DeliveryFax, string)
- Delivery Name (DeliveryName, string)
- Delivery Phone 1 (DeliveryPhone1, string)
- Delivery Phone 2 (DeliveryPhone2, string)
- Delivery Zip Code (DeliveryZipCode, string)
- Email (Email, string)
- Email Invoice (EmailInvoice, string)
- Email Invoice BCC (EmailInvoiceBCC, string)
- Email Invoice CC (EmailInvoiceCC, string)
- Email Offer (EmailOffer, string)
- Email Offer BCC (EmailOfferBCC, string)
- Email Offer CC (EmailOfferCC, string)
- Email Order (EmailOrder, string)
- Email Order BCC (EmailOrderBCC, string)
- Email Order CC (EmailOrderCC, string)
- Fax (Fax, string)
- GLN (GLN, string, 'Global Location Number')
- GLN Delivery (GLNDelivery, string, 'Delivery GLN')
- Invoice Administration Fee (InvoiceAdministrationFee, number)
- Invoice Discount (InvoiceDiscount, number)
- Invoice Freight (InvoiceFreight, number)
- Invoice Remark (InvoiceRemark, string)
- Organisation Number (OrganisationNumber, string, 'Company registration number')
- Our Reference (OurReference, string)
- Phone 1 (Phone1, string)
- Phone 2 (Phone2, string)
- Price List (PriceList, string, 'Default price list code')
- Project (Project, string, 'Default project code')
- Sales Account (SalesAccount, number, 'Default sales account')
- Show Price VAT Included (ShowPriceVATIncluded, boolean)
- Terms Of Delivery (TermsOfDelivery, string, 'Default delivery terms code')
- Terms Of Payment (TermsOfPayment, string, 'Default payment terms code')
- Type (Type, options with PRIVATE/COMPANY, default 'COMPANY', 'Customer type')
- VAT Number (VATNumber, string, 'VAT registration number')
- VAT Type (VATType, options with SEVAT/SEREVERSEDVAT/EUREVERSEDVAT/EUVAT/EXPORT, default 'SEVAT', 'VAT type')
- Visiting Address (VisitingAddress, string)
- Visiting City (VisitingCity, string)
- Visiting Country Code (VisitingCountryCode, string)
- Visiting Zip Code (VisitingZipCode, string)
- WWW (WWW, string, 'Website URL')
- Way Of Delivery (WayOfDelivery, string, 'Default delivery method code')
- Your Reference (YourReference, string, "Customer's reference")
- Zip Code (ZipCode, string, 'Postal code')

Do NOT include read-only fields: Country, DeliveryCountry, VisitingCountry.
Do NOT include nested sub-objects: DefaultDeliveryTypes, DefaultTemplates (deferred per research).

All number fields: default 0. All string fields: default ''. All boolean fields: default false.
All options fields: default to first valid option value.
  </action>
  <verify>
    <automated>cd /Users/adamnoren/n8n-nodes-fortnox && npx tsc --noEmit nodes/Fortnox/CustomerDescription.ts 2>&1 | head -20</automated>
  </verify>
  <done>
    - CustomerDescription.ts exists with exported customerOperations and customerFields
    - 5 operations defined: create, delete, get, getMany, update
    - commonCustomerFields shared array with all ~56 writable fields alphabetized
    - Filters collection includes filter (active/inactive), lastmodified, sortby, sortorder
    - Name is the only required top-level field for create
    - CustomerNumber shared by get, update, delete operations
    - TypeScript compiles without errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ArticleDescription.ts with full field coverage</name>
  <files>nodes/Fortnox/ArticleDescription.ts</files>
  <action>
Create `nodes/Fortnox/ArticleDescription.ts` following the exact InvoiceDescription.ts pattern.

**Exports:** `articleOperations` and `articleFields`

**articleOperations:** Operation dropdown with displayOptions `{ show: { resource: ['article'] } }`:
- Create (value: 'create', action: 'Create an article', description: 'Create a new article')
- Delete (value: 'delete', action: 'Delete an article', description: 'Delete an article')
- Get (value: 'get', action: 'Get an article', description: 'Retrieve an article by article number')
- Get Many (value: 'getMany', action: 'Get many articles', description: 'List articles with optional filters')
- Update (value: 'update', action: 'Update an article', description: 'Update an article')
- default: 'getMany'
- Alphabetized by name.

**articleFields array structure:**

A. **ArticleNumber** (shared by get, update, delete):
   - displayName: 'Article Number', name: 'articleNumber', type: 'string', required: true
   - displayOptions: show resource=['article'], operation=['get', 'update', 'delete']
   - description: 'The article number in Fortnox'

B. **Description** (required for create -- per research recommendation, Description is the most useful identifier even though Fortnox technically has no required fields):
   - displayName: 'Description', name: 'description', type: 'string', required: true
   - displayOptions: show resource=['article'], operation=['create']
   - description: 'Article description'

C. **Return All** toggle (getMany):
   - Same pattern as Invoice

D. **Limit** (getMany when returnAll=false):
   - Same pattern as Invoice, default: 50, min: 1, max: 500

E. **Filters** collection (getMany) with these options (alphabetized by displayName):
   - Filter: options type with values: active, inactive. Default: 'active'. Description: 'Filter articles by status'
   - Last Modified: name 'lastmodified', type 'string', default '', description 'Filter by last modified date (YYYY-MM-DD HH:MM)'
   - Sort By: options with values: articlenumber, quantityinstock, reservedquantity, stockvalue. Default: 'articlenumber'. Description: 'Sort results by field'
   - Sort Order: options with ascending, descending. Default: 'ascending'

F. **Additional Fields** collection (create) -- uses `commonArticleFields`:
   - displayOptions: show resource=['article'], operation=['create']
   - options: commonArticleFields

G. **Update Fields** collection (update) -- uses spread of commonArticleFields:
   - displayOptions: show resource=['article'], operation=['update']
   - options: [...commonArticleFields]

**commonArticleFields array** (alphabetized by displayName, all writable fields):

Include ALL of these fields:
- Active (boolean, default false, 'Whether article is active')
- Article Number (ArticleNumber, string, 'Unique identifier (auto-generated if omitted)')
- Bulky (boolean, default false, 'Whether article is bulky (affects shipping)')
- Construction Account (ConstructionAccount, number)
- Depth (number, 'Article depth (mm)')
- Description (Description, string, 'Article description')
- EAN (string, 'EAN barcode number')
- EU Account (EUAccount, number, 'EU sales account')
- EU VAT Account (EUVATAccount, number, 'EU VAT account')
- Expired (boolean, default false, 'Whether article is expired')
- Export Account (ExportAccount, number, 'Export sales account')
- Height (number, 'Article height (mm)')
- Housework (boolean, default false, 'ROT/RUT housework article')
- Housework Type (HouseworkType, string, 'Housework type code for ROT/RUT deductions') -- use string type per research recommendation (enum values not fully known)
- Manufacturer (string)
- Manufacturer Article Number (ManufacturerArticleNumber, string)
- Note (string, 'Internal note')
- Purchase Account (PurchaseAccount, number)
- Purchase Price (PurchasePrice, number)
- Quantity In Stock (QuantityInStock, number)
- Sales Account (SalesAccount, number, 'Sales revenue account')
- Stock Goods (StockGoods, boolean, 'Whether article is stocked')
- Stock Place (StockPlace, string, 'Location in warehouse')
- Stock Warning (StockWarning, number, 'Low stock warning level')
- Supplier Number (SupplierNumber, string, 'Supplier reference')
- Type (Type, options with STOCK/SERVICE, default 'STOCK', 'Article type')
- Unit (string, 'Unit of measure (e.g., pcs, h, kg)')
- VAT (number, 'VAT percentage')
- Webshop Article (WebshopArticle, boolean, 'Whether visible in webshop')
- Weight (number, 'Article weight (g)')
- Width (number, 'Article width (mm)')

Do NOT include read-only fields: DisposableQuantity, ReservedQuantity, SalesPrice, StockValue, SupplierName.

All number fields: default 0. All string fields: default ''. All boolean fields: default false.
All options fields: default to first valid option value.
  </action>
  <verify>
    <automated>cd /Users/adamnoren/n8n-nodes-fortnox && npx tsc --noEmit nodes/Fortnox/ArticleDescription.ts 2>&1 | head -20</automated>
  </verify>
  <done>
    - ArticleDescription.ts exists with exported articleOperations and articleFields
    - 5 operations defined: create, delete, get, getMany, update
    - commonArticleFields shared array with all ~31 writable fields alphabetized
    - SalesPrice is NOT in writable fields (read-only on Article endpoint)
    - Filters collection includes filter (active/inactive), lastmodified, sortby (articlenumber/quantityinstock/reservedquantity/stockvalue), sortorder
    - Description is the required top-level field for create
    - ArticleNumber shared by get, update, delete operations
    - HouseworkType is string type (not options) per research recommendation
    - TypeScript compiles without errors
  </done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with no errors for both new files
- Both files follow InvoiceDescription.ts conventions: Title Case displayNames, alphabetized options, valid defaults for options fields
- Customer has 5 operations (create, delete, get, getMany, update)
- Article has 5 operations (create, delete, get, getMany, update)
- All writable API fields present in commonFields arrays
- Read-only fields excluded (Country, DeliveryCountry, VisitingCountry for Customer; SalesPrice, StockValue, etc. for Article)
</verification>

<success_criteria>
1. CustomerDescription.ts compiles and exports customerOperations + customerFields
2. ArticleDescription.ts compiles and exports articleOperations + articleFields
3. Both follow exact InvoiceDescription.ts patterns (operations array, fields array, common fields, filters)
4. Full field coverage: all writable Fortnox API fields exposed, no read-only fields included
5. All filter parameters and sort options from Fortnox API included
</success_criteria>

<output>
After completion, create `.planning/phases/03-customer-article-and-order-resources/03-01-SUMMARY.md`
</output>
